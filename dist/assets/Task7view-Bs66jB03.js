import{c as u,a as t,b as X,t as f,n as F,F as k,f as O,j as p,k as U,l as z,o as m,h as b,i as M,e as P}from"./index-BiZalZwz.js";import{_ as V,c as H,S as q}from"./logo-kNHFmx0a.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={name:"Task7View",setup(){const x=[{id:1,title:"Construction of Al Bidyah Mosque",year:"1446 CE",description:"Earliest known mosque in the UAE.",emoji:"ðŸ•Œ",correctOrder:1,correctPosition:!1},{id:2,title:"Discovery of Oil",year:"1958",description:"Marked beginning of modern UAE development.",emoji:"ðŸ›¢ï¸",correctOrder:2,correctPosition:!1},{id:3,title:"Formation of UAE Federation",year:"1971",description:"Union of seven emirates.",emoji:"ðŸ‡¦ðŸ‡ª",correctOrder:3,correctPosition:!1}],s=e=>{const o=[...e];for(let d=o.length-1;d>0;d--){const g=Math.floor(Math.random()*(d+1));[o[d],o[g]]=[o[g],o[d]]}return o},c=p(s(x).map((e,o)=>({...e,position:o+1,matchedYear:null}))),r=p([...x].sort((e,o)=>e.correctOrder-o.correctOrder).map(e=>({...e}))),h=p(null),v=p(!1),l=p(null),n=p(null),i=U(()=>c.value.filter(o=>o.matchedYear?.year===o.year).length/c.value.length*100),S=e=>{e.correctPosition=e.matchedYear?.year===e.year},j=(e,o,d)=>{h.value={index:o,type:d},v.value=!0,l.value=o,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain","")},w=()=>{v.value=!1,h.value=null,l.value=null,a&&C()},_=(e,o)=>{if(e.preventDefault(),h.value?.type==="year"){const d=r.value[h.value.index];c.value[o].matchedYear={...d},S(c.value[o])}n.value=null};let a=null,D=0,T=0;const Y=5,A=(e,o,d)=>{e.preventDefault();const g=e.touches[0];D=g.clientX,T=g.clientY,h.value={index:o,type:d},v.value=!0,l.value=o,a=e.target.cloneNode(!0),a.style.position="fixed",a.style.pointerEvents="none",a.style.left=`${g.pageX}px`,a.style.top=`${g.pageY}px`,a.style.opacity="0.9",a.style.transform="translate(-50%, -50%) scale(1.1)",a.style.transition="transform 0.1s ease-out",a.style.zIndex="1000",a.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)",a.style.borderRadius="0.5rem",document.body.appendChild(a),a.offsetWidth,a.style.transform="translate(-50%, -50%) scale(1.1)"},B=e=>{if(!a||!v.value)return;const o=e.touches[0],d=Math.abs(o.clientX-D),g=Math.abs(o.clientY-T);if(d<Y&&g<Y)return;a.style.left=`${o.pageX}px`,a.style.top=`${o.pageY}px`;const E=document.elementFromPoint(o.clientX,o.clientY);if(E){const y=E.closest("[data-index]");y&&y.dataset.index?n.value=Number(y.dataset.index):n.value=null}else n.value=null;e.preventDefault()},C=()=>{a&&(a.style.opacity="0",a.style.pointerEvents="none",setTimeout(()=>{a&&a.parentNode&&a.remove(),a=null},50))},L=e=>{a&&(e.preventDefault(),n.value!==null&&_(e,n.value),C(),w(),n.value=null)},I=e=>{c.value[e].matchedYear=null,c.value[e].correctPosition=!1},N=()=>{c.value=s(x).map((e,o)=>({...e,position:o+1,matchedYear:null,correctPosition:!1}))};return z(()=>c.value.map(e=>e.matchedYear?.year),()=>{c.value.every(e=>e.matchedYear?.year===e.year)&&(H({particleCount:100,spread:70,origin:{y:.6}}),q.fire({title:"ðŸŽ‰ Well Done!",text:"All years are matched!",icon:"success",confirmButtonText:"Play Again!",showCancelButton:!1,allowOutsideClick:!1}).then(e=>{e.isConfirmed&&N()}))},{deep:!0}),{events:c,years:r,progress:i,isDragging:v,isDraggingOver:n,draggedItemIndex:l,onDragStart:j,onDragEnd:w,onDrop:_,removeYear:I,onTouchStart:A,onTouchMove:B,onTouchEnd:L}}},G={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-3 md:p-6 transition-colors duration-300"},J={class:"max-w-3xl mx-auto"},K={class:"bg-white rounded-xl shadow-md p-5 mb-6 transition-all duration-200 hover:shadow-sm"},Q={class:"mt-5"},Z={class:"flex justify-between text-xs text-gray-500 mb-1"},$={class:"font-medium"},ee={class:"w-full bg-gray-100 rounded-full h-2 overflow-hidden"},te={class:"bg-white/90 rounded-xl shadow-sm p-4 mb-6 border border-gray-100"},oe={class:"flex flex-wrap justify-center gap-2"},re=["onDragstart","onTouchstart"],ae={class:"text-base font-bold"},se={class:"mb-8"},ne={class:"grid grid-cols-1 gap-3"},le=["onDragover","onDrop","data-index"],ie={class:"flex items-start gap-3"},de={class:"flex-shrink-0 p-2.5 rounded-lg bg-gradient-to-br from-blue-50 to-white shadow-inner border border-blue-50"},ce={class:"text-2xl"},ge={class:"flex-1 min-w-0"},ue={class:"flex justify-between items-start gap-2"},me={class:"text-base font-semibold text-gray-800 leading-snug"},he=["onClick"],ve={class:"text-gray-600 text-xs mt-1 leading-relaxed"},fe={class:"mt-2"},pe={class:"mr-1.5"},xe={key:0,class:"flex items-center justify-center w-4 h-4 bg-green-500 text-white rounded-full"},ye={key:1,class:"h-8 w-20 bg-gray-100 rounded-md animate-pulse"};function be(x,s,c,r,h,v){return m(),u("div",G,[t("div",J,[t("div",K,[s[5]||(s[5]=X('<div class="text-center space-y-1"><div class="flex flex-col items-center -mb-1"><img src="'+V+'" alt="Logo" class="h-10 md:h-12 w-auto"><h1 class="text-xl md:text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent"> Urban Navigator <div class="text-xs md:text-sm font-medium text-gray-500">Fujairah â€“ Al Bidyah Mosque</div></h1></div><div class="w-12 h-0.5 bg-gradient-to-r from-blue-400 to-indigo-400 mx-auto my-1.5 rounded-full"></div><h2 class="text-base text-gray-600 font-medium">Chronicles of Time</h2></div><p class="text-sm text-gray-600 text-center max-w-2xl mx-auto mt-3 mb-4 leading-relaxed"> Match each historical event with its corresponding year by dragging and dropping the year cards below. </p>',2)),t("div",Q,[t("div",Z,[s[4]||(s[4]=t("span",null,"Progress",-1)),t("span",$,f(Math.round(r.progress))+"%",1)]),t("div",ee,[t("div",{class:"h-full bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 transition-all duration-500 ease-out",style:F({width:`${r.progress}%`})},null,4)])])]),t("div",te,[s[6]||(s[6]=t("div",{class:"text-center mb-4"},[t("h3",{class:"text-lg font-semibold text-gray-800"},"Years"),t("p",{class:"text-xs text-gray-500 mt-0.5"},"Drag and drop to match with events")],-1)),t("div",oe,[(m(!0),u(k,null,O(r.years,(l,n)=>(m(),u("div",{key:"year-"+l.id,draggable:"true",onDragstart:i=>r.onDragStart(i,n,"year"),onDragend:s[0]||(s[0]=(...i)=>r.onDragEnd&&r.onDragEnd(...i)),onTouchstart:i=>r.onTouchStart(i,n,"year"),onTouchmove:s[1]||(s[1]=(...i)=>r.onTouchMove&&r.onTouchMove(...i)),onTouchend:s[2]||(s[2]=i=>r.onTouchEnd(i)),class:b(["px-4 py-2 rounded-lg bg-gradient-to-br from-blue-50 to-white text-blue-700 font-semibold text-sm flex items-center justify-center min-w-[90px] shadow-sm border border-blue-100 cursor-grab active:cursor-grabbing hover:shadow transition-all duration-150 hover:-translate-y-0.5",{"opacity-50":r.isDragging&&r.draggedItemIndex===n,"ring-1 ring-blue-400":r.isDragging&&r.draggedItemIndex===n}])},[t("span",ae,f(l.year),1)],42,re))),128))])]),t("div",se,[s[9]||(s[9]=t("div",{class:"text-center mb-4"},[t("h3",{class:"text-lg font-semibold text-gray-800"},"Historical Events"),t("p",{class:"text-xs text-gray-500 mt-0.5"},"Drop years onto the matching events")],-1)),t("div",ne,[(m(!0),u(k,null,O(r.events,(l,n)=>(m(),u("div",{key:l.id,class:b(["bg-white/95 rounded-lg shadow-sm p-4 border transition-all duration-200 hover:shadow-sm",{"border-green-200 bg-green-50/30":l.correctPosition,"border-gray-100 hover:border-blue-200":!l.correctPosition&&!r.isDraggingOver,"border-blue-300 bg-blue-50/30":r.isDraggingOver===n,"ring-1 ring-blue-400":r.isDraggingOver===n}]),onDragover:M(i=>r.isDraggingOver=n,["prevent"]),onDragleave:s[3]||(s[3]=i=>r.isDraggingOver=null),onDrop:i=>r.onDrop(i,n),"data-index":n},[t("div",ie,[t("div",de,[t("span",ce,f(l.emoji),1)]),t("div",ge,[t("div",ue,[t("h3",me,f(l.title),1),l.matchedYear?(m(),u("button",{key:0,onClick:M(i=>r.removeYear(n),["stop"]),class:"text-gray-300 hover:text-red-500 transition-colors p-0.5 -mt-1 -mr-1","aria-label":"Remove year"},[...s[7]||(s[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],8,he)):P("",!0)]),t("p",ve,f(l.description),1),t("div",fe,[l.matchedYear?(m(),u("div",{key:0,class:b(["inline-flex items-center px-3 py-1.5 rounded-md text-xs font-medium border transition-colors",{"bg-green-50 text-green-800 border-green-200":l.correctPosition,"bg-red-50 text-red-800 border-red-200":!l.correctPosition,"animate-pulse":r.isDraggingOver===n}])},[t("span",pe,f(l.matchedYear.year),1),l.correctPosition?(m(),u("span",xe,[...s[8]||(s[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-2.5 w-2.5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])])):P("",!0)],2)):(m(),u("div",ye))])])])],42,le))),128))])])])])}const Te=R(W,[["render",be]]);export{Te as default};
